<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS2014 Coins (Assignment 3): cs2014coin.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS2014 Coins (Assignment 3)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cs2014coin.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the external i/f for the cs2014 coin example.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="cs2014coin_8h__dep__incl.png" border="0" usemap="#cs2014coin_8hdep" alt=""/></div>
<map name="cs2014coin_8hdep" id="cs2014coin_8hdep">
<area shape="rect" id="node2" href="cs2014coin-check_8c.html" title="This is the implemetation of the cs2014 coin checker. " alt="" coords="5,80,144,107"/>
<area shape="rect" id="node3" href="cs2014coin-main_8c.html" title="This is the main function for cs2014 coin handling. " alt="" coords="168,80,299,107"/>
<area shape="rect" id="node4" href="cs2014coin-make_8c.html" title="This is the implementation of the cs2014 coin maker. " alt="" coords="323,80,458,107"/>
<area shape="rect" id="node5" href="cs2014coin-util_8c.html" title="This is the implementation of utilities for cs2014 coins. " alt="" coords="483,80,603,107"/>
</map>
</div>
</div>
<p><a href="cs2014coin_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcs2014coin__t__defn.html">cs2014coin_t_defn</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">our basic cs2094 coin type  <a href="structcs2014coin__t__defn.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8626eb8e0b824c47a00ed9dfb411763c"><td class="memItemLeft" align="right" valign="top"><a id="a8626eb8e0b824c47a00ed9dfb411763c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_BUFSIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a8626eb8e0b824c47a00ed9dfb411763c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0ab920e51b69083b4a29ab8813dd9d"><td class="memItemLeft" align="right" valign="top"><a id="abc0ab920e51b69083b4a29ab8813dd9d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_PROGRESS</b></td></tr>
<tr class="separator:abc0ab920e51b69083b4a29ab8813dd9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960fed81511c80d2f7fc0e7e999a27a7"><td class="memItemLeft" align="right" valign="top"><a id="a960fed81511c80d2f7fc0e7e999a27a7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_GOOD</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a960fed81511c80d2f7fc0e7e999a27a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8ba6442a275cba66d527bb610f4589"><td class="memItemLeft" align="right" valign="top"><a id="a2f8ba6442a275cba66d527bb610f4589"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_BAD</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2f8ba6442a275cba66d527bb610f4589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5364e9ad0c03c30ff9f8ab7a81f52078"><td class="memItemLeft" align="right" valign="top"><a id="a5364e9ad0c03c30ff9f8ab7a81f52078"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_GENERR</b>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:a5364e9ad0c03c30ff9f8ab7a81f52078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20da7173260bf769bcafbb06c7b119b4"><td class="memItemLeft" align="right" valign="top"><a id="a20da7173260bf769bcafbb06c7b119b4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_MAXITER</b>&#160;&#160;&#160;1024*1024</td></tr>
<tr class="separator:a20da7173260bf769bcafbb06c7b119b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325f4a58f8c9840992edfa4972f90bef"><td class="memItemLeft" align="right" valign="top"><a id="a325f4a58f8c9840992edfa4972f90bef"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CS2014COIN_CS_0</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a325f4a58f8c9840992edfa4972f90bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7ac320e3e2bce433242b9358c51a34c8"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcs2014coin__t__defn.html">cs2014coin_t_defn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs2014coin_8h.html#a7ac320e3e2bce433242b9358c51a34c8">cs2014coin_t</a></td></tr>
<tr class="memdesc:a7ac320e3e2bce433242b9358c51a34c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">our basic cs2094 coin type  <a href="#a7ac320e3e2bce433242b9358c51a34c8">More...</a><br /></td></tr>
<tr class="separator:a7ac320e3e2bce433242b9358c51a34c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af955b20ed8c88563e864ecca0b2e538e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs2014coin_8h.html#af955b20ed8c88563e864ecca0b2e538e">cs2014coin_err</a> (int errno)</td></tr>
<tr class="memdesc:af955b20ed8c88563e864ecca0b2e538e"><td class="mdescLeft">&#160;</td><td class="mdescRight">return out best guess error string  <a href="#af955b20ed8c88563e864ecca0b2e538e">More...</a><br /></td></tr>
<tr class="separator:af955b20ed8c88563e864ecca0b2e538e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71eabb5a75b43b92f05f52bff713e429"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs2014coin_8h.html#a71eabb5a75b43b92f05f52bff713e429">cs2014coin_make</a> (int bits, unsigned char *buf, int *buflen)</td></tr>
<tr class="memdesc:a71eabb5a75b43b92f05f52bff713e429"><td class="mdescLeft">&#160;</td><td class="mdescRight">make a coin  <a href="#a71eabb5a75b43b92f05f52bff713e429">More...</a><br /></td></tr>
<tr class="separator:a71eabb5a75b43b92f05f52bff713e429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d692031170a392c66b9810c65a79a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs2014coin_8h.html#ae7d692031170a392c66b9810c65a79a3">cs2014coin_check</a> (int bits, unsigned char *buf, int buflen, int *res)</td></tr>
<tr class="memdesc:ae7d692031170a392c66b9810c65a79a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">check a coin  <a href="#ae7d692031170a392c66b9810c65a79a3">More...</a><br /></td></tr>
<tr class="separator:ae7d692031170a392c66b9810c65a79a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the external i/f for the cs2014 coin example. </p>
<p>It should go without saying that these coins are for play:-)</p>
<p>This is part of CS2014 <a href="https://down.dsg.cs.tcd.ie/cs2014/examples/c-progs-2/README.html">https://down.dsg.cs.tcd.ie/cs2014/examples/c-progs-2/README.html</a> </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a7ac320e3e2bce433242b9358c51a34c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ac320e3e2bce433242b9358c51a34c8">&#9670;&nbsp;</a></span>cs2014coin_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcs2014coin__t__defn.html">cs2014coin_t_defn</a>  <a class="el" href="cs2014coin_8h.html#a7ac320e3e2bce433242b9358c51a34c8">cs2014coin_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>our basic cs2094 coin type </p>
<p>This structure describes a cs2014 coin. Fields are flattened as usual, lengths use network byte order. The hash is over the fields that preceed it in the struct. The rightmost 'bits' bits of the hash value must be zero. The signature is over the fields that proceed it in the struct. All length fields, except 'bits' are in octets </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae7d692031170a392c66b9810c65a79a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d692031170a392c66b9810c65a79a3">&#9670;&nbsp;</a></span>cs2014coin_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cs2014coin_check </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check a coin </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>specifies how many bits need to be zero in the hash-output </td></tr>
    <tr><td class="paramname">buf</td><td>is an allocated buffer for the coin </td></tr>
    <tr><td class="paramname">buflen</td><td>specifies the input coin size </td></tr>
    <tr><td class="paramname">res</td><td>contains the result of checking the coin </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero for fail</dd></dl>
<p>Make me a coin of the required quality/strength</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>specifies how many bits need to be zero in the hash-output </td></tr>
    <tr><td class="paramname">buf</td><td>is an allocated buffer for the coin </td></tr>
    <tr><td class="paramname">buflen</td><td>specifies the input coin size </td></tr>
    <tr><td class="paramname">res</td><td>contains the result of checking the coin </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero for fail (note: success != good coin!)</dd></dl>
<p>Check a coin of the required quality/strength Note we attempt to be roughly constant time here, just for fun But, if this were called on recovered plaintext, that might be significant! See <a href="https://cryptocoding.net/index.php/Coding_rules">https://cryptocoding.net/index.php/Coding_rules</a> </p>
<p>TODO: have a dummy public key ready for this so we do sig check of some sort </p>

</div>
</div>
<a id="af955b20ed8c88563e864ecca0b2e538e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af955b20ed8c88563e864ecca0b2e538e">&#9670;&nbsp;</a></span>cs2014coin_err()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* cs2014coin_err </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errno</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return out best guess error string </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errno</td><td>is an errno, presumably returned from somewhere else in this API </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error string (a const)</dd></dl>
<p>Error string handler. Good to use unique error numbers for all different conditions </p>

</div>
</div>
<a id="a71eabb5a75b43b92f05f52bff713e429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71eabb5a75b43b92f05f52bff713e429">&#9670;&nbsp;</a></span>cs2014coin_make()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cs2014coin_make </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>make a coin </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>specifies how many bits need to be zero in the hash-output </td></tr>
    <tr><td class="paramname">buf</td><td>is an allocated buffer for the coin </td></tr>
    <tr><td class="paramname">buflen</td><td>is an in/out parameter reflecting the buffer-size/actual-coin-size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero for fail (note: success != good coin!)</dd></dl>
<p>Make me a coin of the required quality/strength</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>specifies how many bits need to be zero in the hash-output </td></tr>
    <tr><td class="paramname">buf</td><td>is an allocated buffer for the coin </td></tr>
    <tr><td class="paramname">buflen</td><td>is an in/out parameter reflecting the buffer-size/actual-coin-size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero for fail</dd></dl>
<p>Make me a coin of the required quality/strength </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
